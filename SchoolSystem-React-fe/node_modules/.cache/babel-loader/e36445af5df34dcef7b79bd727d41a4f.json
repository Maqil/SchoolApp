{"ast":null,"code":"var _jsxFileName = \"/Users/mohamedmaqil/Desktop/RIVO/rivo-portal-ui/src/components/ShipmentsRow/ShipmentsRow.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useTranslation, getI18n } from \"react-i18next\";\nimport { useTracking } from \"../../providers/TrackingProvider\";\nimport { CircularProgress, Tab, Collapse } from \"@mui/material\";\nimport ShipmentsRowHistoryTab from \"../ShipmentsRowHistoryTab/ShipmentsRowHistoryTab\";\nimport ShipmentsRowDetailsTab from \"../ShipmentsRowDetailsTab/ShipmentsRowDetailsTab\";\nimport { ExpandMore, ArrowForward } from \"@mui/icons-material\";\nimport { RowBox, RowSummaryWrapper, RowSummaryAirbill, RowSummaryReference, RowSummaryLastEventType, RowSummaryConsigneeName, RowSummaryEstimatedDeliveryDate, RowSummaryButton, ShipmentDetailsNavTabs, ContentLoading, ListTabPanel, DesktopTabWrapper } from \"./ShipmentsRow.style\";\nimport Moment from \"moment\";\nimport MediaQuery from \"react-responsive\";\nimport TabContext from \"@mui/lab/TabContext\";\nimport ShipmentsRowActionTab from \"../ShipmentsRowActionTab/ShipmentsRowActionTab\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ShipmentsRow(props) {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const trackingContext = useTracking();\n  const {\n    row\n  } = props;\n  const [contentLoaded, setContentLoaded] = useState(false);\n  const [contentError, setContentError] = useState(false);\n  const [flag, setFlag] = useState(false);\n  const [expanded, setExpanded] = useState(false);\n  const [tabValue, setTabValue] = useState(\"1\");\n  Moment.locale(getI18n().resolvedLanguage);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  const handleRowExpand = async event => {\n    setExpanded(!expanded);\n\n    if (!contentLoaded) {\n      await trackingContext.getTrackingData(row.airWaybill);\n      setFlag(true);\n    } else {\n      var _trackingContext$trac;\n\n      // do nothing... or handle reload because of previous error\n      if (((_trackingContext$trac = trackingContext.trackingData.get(row.airWaybill)) === null || _trackingContext$trac === void 0 ? void 0 : _trackingContext$trac.status) === \"ERROR\") {\n        setContentError(false);\n        setContentLoaded(false);\n      }\n    }\n  };\n\n  const reachedDestinationCodes = [\"DLD\", \"DDL\", \"RTS\", \"ADL\", \"ATD\", \"DPU\"];\n\n  const asReachedDestination = shipmentEvent => {\n    let asReachedDestinationFlag = false;\n\n    for (const reachedDestinationCode of reachedDestinationCodes) {\n      if (reachedDestinationCode === shipmentEvent) {\n        asReachedDestinationFlag = true;\n      }\n    }\n\n    return asReachedDestinationFlag;\n  };\n\n  const isLate = Moment(row.estimatedDeliveryDate).isBefore() && !asReachedDestination(row.lastEventType) ? true : false;\n  useEffect(() => {\n    if (flag && !trackingContext.loading && trackingContext.trackingData.get(row.airWaybill)) {\n      var _trackingContext$trac2;\n\n      setContentLoaded(true);\n\n      if (((_trackingContext$trac2 = trackingContext.trackingData.get(row.airWaybill)) === null || _trackingContext$trac2 === void 0 ? void 0 : _trackingContext$trac2.status) === \"ERROR\") {\n        setContentError(true);\n        setFlag(false);\n      }\n    } // eslint-disable-next-line\n\n  }, [trackingContext.loading, flag]);\n  return /*#__PURE__*/_jsxDEV(RowBox, {\n    children: [/*#__PURE__*/_jsxDEV(RowSummaryWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(RowSummaryAirbill, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data-label\",\n          children: t(\"shipments-dashboard.row.header.airWaybill\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data-value\",\n          children: row.airWaybill\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RowSummaryReference, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data-label\",\n          children: t(\"shipments-dashboard.row.header.packageReference\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data-value\",\n          children: row.packageReference\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RowSummaryConsigneeName, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data-label\",\n          children: t(\"shipments-dashboard.row.header.consigneeName\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data-value\",\n          children: row.consigneeName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RowSummaryEstimatedDeliveryDate, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data-label\",\n          children: t(\"shipments-dashboard.row.header.estimatedDeliveryDate\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `data-value ${isLate ? \"is-late\" : \"\"}`,\n          children: [Moment(row.estimatedDeliveryDate).format(\"MMM D\"), \" \", isLate ? \"- \" + t(\"shipments-dashboard.row.header.estimatedDeliveryDateLate\") : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RowSummaryButton, {\n        className: expanded ? \"row-details-expanded\" : \"row-details-closed\",\n        onClick: handleRowExpand,\n        children: /*#__PURE__*/_jsxDEV(ExpandMore, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RowSummaryLastEventType, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data-label\",\n          children: t(\"shipments-dashboard.row.header.lastEventType\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data-value\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: row.lastEventType ? t(\"shipments-dashboard.row.status.\" + row.lastEventType) : \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-extra\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"details-ship-city\",\n              children: row.shipperCity.charAt(0).toUpperCase() + row.shipperCity.slice(1).toLowerCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(ArrowForward, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"details-con-city\",\n              children: row.consigneeCity.charAt(0).toUpperCase() + row.consigneeCity.slice(1).toLowerCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"data-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-progression\",\n            \"data-type\": row.lastEventType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n      in: expanded,\n      children: [/*#__PURE__*/_jsxDEV(Collapse, {\n        in: contentLoaded && !contentError,\n        mountOnEnter: true,\n        className: \"row-details-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(MediaQuery, {\n          maxWidth: 767,\n          children: /*#__PURE__*/_jsxDEV(TabContext, {\n            value: tabValue,\n            children: [/*#__PURE__*/_jsxDEV(ShipmentDetailsNavTabs, {\n              value: tabValue,\n              onChange: handleTabChange,\n              indicatorColor: \"primary\",\n              variant: \"fullWidth\",\n              selectionFollowsFocus: true,\n              \"aria-label\": \"Tabs with more information about this shipment. Use the arrow key to navigate between tabs.\",\n              children: [/*#__PURE__*/_jsxDEV(Tab, {\n                label: t(\"tracking-results.shipping-details.header.history\"),\n                value: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                label: t(\"tracking-results.shipping-details.header.info\"),\n                value: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                label: t(\"tracking-results.shipping-details.header.action\"),\n                value: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListTabPanel, {\n              value: \"1\",\n              children: /*#__PURE__*/_jsxDEV(ShipmentsRowHistoryTab, {\n                airwayBill: row.airWaybill\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListTabPanel, {\n              value: \"2\",\n              children: /*#__PURE__*/_jsxDEV(ShipmentsRowDetailsTab, {\n                airwayBill: row.airWaybill\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListTabPanel, {\n              value: \"3\",\n              children: /*#__PURE__*/_jsxDEV(ShipmentsRowActionTab, {\n                airwayBill: row.airWaybill\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MediaQuery, {\n          minWidth: 768,\n          children: /*#__PURE__*/_jsxDEV(DesktopTabWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(ShipmentsRowHistoryTab, {\n              airwayBill: row.airWaybill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ShipmentsRowDetailsTab, {\n              airwayBill: row.airWaybill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n        in: !contentLoaded && !contentError,\n        mountOnEnter: true,\n        unmountOnExit: true,\n        children: /*#__PURE__*/_jsxDEV(ContentLoading, {\n          children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 60\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n        in: contentError,\n        mountOnEnter: true,\n        children: /*#__PURE__*/_jsxDEV(ContentLoading, {\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"error\",\n            children: t(\"shipments-dashboard.row.header.error.load\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ShipmentsRow, \"8rZQpFLapNemfEZ1qvFUTwFgrGs=\", false, function () {\n  return [useTranslation, useTracking];\n});\n\n_c = ShipmentsRow;\nexport default ShipmentsRow;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShipmentsRow\");","map":{"version":3,"sources":["/Users/mohamedmaqil/Desktop/RIVO/rivo-portal-ui/src/components/ShipmentsRow/ShipmentsRow.tsx"],"names":["useEffect","useState","useTranslation","getI18n","useTracking","CircularProgress","Tab","Collapse","ShipmentsRowHistoryTab","ShipmentsRowDetailsTab","ExpandMore","ArrowForward","RowBox","RowSummaryWrapper","RowSummaryAirbill","RowSummaryReference","RowSummaryLastEventType","RowSummaryConsigneeName","RowSummaryEstimatedDeliveryDate","RowSummaryButton","ShipmentDetailsNavTabs","ContentLoading","ListTabPanel","DesktopTabWrapper","Moment","MediaQuery","TabContext","ShipmentsRowActionTab","ShipmentsRow","props","t","trackingContext","row","contentLoaded","setContentLoaded","contentError","setContentError","flag","setFlag","expanded","setExpanded","tabValue","setTabValue","locale","resolvedLanguage","handleTabChange","event","newValue","handleRowExpand","getTrackingData","airWaybill","trackingData","get","status","reachedDestinationCodes","asReachedDestination","shipmentEvent","asReachedDestinationFlag","reachedDestinationCode","isLate","estimatedDeliveryDate","isBefore","lastEventType","loading","packageReference","consigneeName","format","shipperCity","charAt","toUpperCase","slice","toLowerCase","consigneeCity"],"mappings":"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","sourcesContent":["import { useEffect, useState, SyntheticEvent } from \"react\";\nimport { useTranslation, getI18n } from \"react-i18next\";\nimport { useTracking } from \"../../providers/TrackingProvider\";\nimport { CircularProgress, Tab, Collapse } from \"@mui/material\";\nimport ShipmentsRowHistoryTab from \"../ShipmentsRowHistoryTab/ShipmentsRowHistoryTab\";\nimport ShipmentsRowDetailsTab from \"../ShipmentsRowDetailsTab/ShipmentsRowDetailsTab\";\nimport { ExpandMore, ArrowForward } from \"@mui/icons-material\";\nimport {\n  RowBox,\n  RowSummaryWrapper,\n  RowSummaryAirbill,\n  RowSummaryReference,\n  RowSummaryLastEventType,\n  RowSummaryConsigneeName,\n  RowSummaryEstimatedDeliveryDate,\n  RowSummaryButton,\n  ShipmentDetailsNavTabs,\n  ContentLoading,\n  ListTabPanel,\n  DesktopTabWrapper\n} from \"./ShipmentsRow.style\";\nimport Moment from \"moment\";\nimport MediaQuery from \"react-responsive\";\nimport TabContext from \"@mui/lab/TabContext\";\nimport ShipmentsRowActionTab from \"../ShipmentsRowActionTab/ShipmentsRowActionTab\";\n\nfunction ShipmentsRow(props) {\n  const { t } = useTranslation();\n  const trackingContext = useTracking();\n  const { row } = props;\n  const [contentLoaded, setContentLoaded] = useState(false);\n  const [contentError, setContentError] = useState(false);\n  const [flag, setFlag] = useState(false);\n  const [expanded, setExpanded] = useState(false);\n  const [tabValue, setTabValue] = useState(\"1\");\n\n  Moment.locale(getI18n().resolvedLanguage);\n\n  const handleTabChange = (event: SyntheticEvent, newValue: string) => {\n    setTabValue(newValue);\n  };\n\n  const handleRowExpand = async (event: SyntheticEvent) => {\n    setExpanded(!expanded);\n    if (!contentLoaded) {\n      await trackingContext.getTrackingData(row.airWaybill);\n      setFlag(true);\n    } else {\n      // do nothing... or handle reload because of previous error\n      if (\n        trackingContext.trackingData.get(row.airWaybill)?.status === \"ERROR\"\n      ) {\n        setContentError(false);\n        setContentLoaded(false);\n      }\n    }\n  };\n\n  const reachedDestinationCodes = [\"DLD\", \"DDL\", \"RTS\", \"ADL\", \"ATD\", \"DPU\"];\n  const asReachedDestination = shipmentEvent => {\n    let asReachedDestinationFlag = false;\n    for (const reachedDestinationCode of reachedDestinationCodes) {\n      if (reachedDestinationCode === shipmentEvent) {\n        asReachedDestinationFlag = true;\n      }\n    }\n    return asReachedDestinationFlag;\n  };\n  const isLate =\n    Moment(row.estimatedDeliveryDate).isBefore() &&\n    !asReachedDestination(row.lastEventType)\n      ? true\n      : false;\n\n  useEffect(() => {\n    if (\n      flag &&\n      !trackingContext.loading &&\n      trackingContext.trackingData.get(row.airWaybill)\n    ) {\n      setContentLoaded(true);\n      if (\n        trackingContext.trackingData.get(row.airWaybill)?.status === \"ERROR\"\n      ) {\n        setContentError(true);\n        setFlag(false);\n      }\n    }\n    // eslint-disable-next-line\n  }, [trackingContext.loading, flag]);\n\n  return (\n    <RowBox>\n      <RowSummaryWrapper>\n        <RowSummaryAirbill>\n          <div className=\"data-label\">\n            {t(\"shipments-dashboard.row.header.airWaybill\")}\n          </div>\n          <div className=\"data-value\">{row.airWaybill}</div>\n        </RowSummaryAirbill>\n        <RowSummaryReference>\n          <div className=\"data-label\">\n            {t(\"shipments-dashboard.row.header.packageReference\")}\n          </div>\n          <div className=\"data-value\">{row.packageReference}</div>\n        </RowSummaryReference>\n        <RowSummaryConsigneeName>\n          <div className=\"data-label\">\n            {t(\"shipments-dashboard.row.header.consigneeName\")}\n          </div>\n          <div className=\"data-value\">{row.consigneeName}</div>\n        </RowSummaryConsigneeName>\n        <RowSummaryEstimatedDeliveryDate>\n          <div className=\"data-label\">\n            {t(\"shipments-dashboard.row.header.estimatedDeliveryDate\")}\n          </div>\n          <div className={`data-value ${isLate ? \"is-late\" : \"\"}`}>\n            {Moment(row.estimatedDeliveryDate).format(\"MMM D\")}{\" \"}\n            {isLate\n              ? \"- \" +\n                t(\"shipments-dashboard.row.header.estimatedDeliveryDateLate\")\n              : \"\"}\n          </div>\n        </RowSummaryEstimatedDeliveryDate>\n        <RowSummaryButton\n          className={expanded ? \"row-details-expanded\" : \"row-details-closed\"}\n          onClick={handleRowExpand}\n        >\n          <ExpandMore />\n        </RowSummaryButton>\n        <RowSummaryLastEventType>\n          <div className=\"data-label\">\n            {t(\"shipments-dashboard.row.header.lastEventType\")}\n          </div>\n          <div className=\"data-value\">\n            <div>\n              {row.lastEventType\n                ? t(\"shipments-dashboard.row.status.\" + row.lastEventType)\n                : \" \"}\n            </div>\n            <div className=\"data-extra\">\n              <span className=\"details-ship-city\">\n                {row.shipperCity.charAt(0).toUpperCase() +\n                  row.shipperCity.slice(1).toLowerCase()}\n              </span>{\" \"}\n              <ArrowForward />{\" \"}\n              <span className=\"details-con-city\">\n                {row.consigneeCity.charAt(0).toUpperCase() +\n                  row.consigneeCity.slice(1).toLowerCase()}\n              </span>\n            </div>\n          </div>\n          <div className=\"data-bar\">\n            <div\n              className=\"data-progression\"\n              data-type={row.lastEventType}\n            ></div>\n          </div>\n        </RowSummaryLastEventType>\n      </RowSummaryWrapper>\n      <Collapse in={expanded}>\n        <Collapse\n          in={contentLoaded && !contentError}\n          mountOnEnter\n          className=\"row-details-wrapper\"\n        >\n          <MediaQuery maxWidth={767}>\n            <TabContext value={tabValue}>\n              <ShipmentDetailsNavTabs\n                value={tabValue}\n                onChange={handleTabChange}\n                indicatorColor=\"primary\"\n                variant=\"fullWidth\"\n                selectionFollowsFocus\n                aria-label=\"Tabs with more information about this shipment. Use the arrow key to navigate between tabs.\"\n              >\n                <Tab\n                  label={t(\"tracking-results.shipping-details.header.history\")}\n                  value=\"1\"\n                />\n                <Tab\n                  label={t(\"tracking-results.shipping-details.header.info\")}\n                  value=\"2\"\n                />\n                <Tab\n                  label={t(\"tracking-results.shipping-details.header.action\")}\n                  value=\"3\"\n                />\n              </ShipmentDetailsNavTabs>\n              <ListTabPanel value=\"1\">\n                <ShipmentsRowHistoryTab airwayBill={row.airWaybill} />\n              </ListTabPanel>\n              <ListTabPanel value=\"2\">\n                <ShipmentsRowDetailsTab airwayBill={row.airWaybill} />\n              </ListTabPanel>\n              <ListTabPanel value=\"3\">\n                <ShipmentsRowActionTab airwayBill={row.airWaybill} />\n              </ListTabPanel>\n            </TabContext>\n          </MediaQuery>\n          <MediaQuery minWidth={768}>\n            <DesktopTabWrapper>\n              <ShipmentsRowHistoryTab airwayBill={row.airWaybill} />\n              <ShipmentsRowDetailsTab airwayBill={row.airWaybill} />\n            </DesktopTabWrapper>\n          </MediaQuery>\n        </Collapse>\n        <Collapse\n          in={!contentLoaded && !contentError}\n          mountOnEnter\n          unmountOnExit\n        >\n          <ContentLoading>\n            <CircularProgress size={60} />\n          </ContentLoading>\n        </Collapse>\n        <Collapse in={contentError} mountOnEnter>\n          <ContentLoading>\n            <span className=\"error\">\n              {t(\"shipments-dashboard.row.header.error.load\")}\n            </span>\n          </ContentLoading>\n        </Collapse>\n      </Collapse>\n    </RowBox>\n  );\n}\n\nexport default ShipmentsRow;\n"]},"metadata":{},"sourceType":"module"}