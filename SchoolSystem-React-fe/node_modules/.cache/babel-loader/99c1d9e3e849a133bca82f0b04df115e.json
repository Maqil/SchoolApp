{"ast":null,"code":"var _jsxFileName = \"/Users/mohamedmaqil/Desktop/RIVO/rivo-portal-ui/src/components/ShipmentsRow/ShipmentsRow.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useTranslation, getI18n } from \"react-i18next\";\nimport { useTracking } from \"../../providers/TrackingProvider\";\nimport { CircularProgress, Tab, AccordionSummary, AccordionDetails, Collapse } from \"@mui/material\";\nimport ShipmentsRowHistoryTab from \"../ShipmentsRowHistoryTab/ShipmentsRowHistoryTab\";\nimport ShipmentsRowDetailsTab from \"../ShipmentsRowDetailsTab/ShipmentsRowDetailsTab\";\nimport { ExpandMore, ArrowForward } from \"@mui/icons-material\";\nimport { RowSummaryWrapper, RowSummaryAirbill, RowSummaryReference, RowSummaryLastEventType, RowSummaryConsigneeName, RowSummaryEstimatedDeliveryDate, RowAccordion, ShipmentDetailsNavTabs, ContentLoading, ListTabPanel, DesktopTabWrapper } from \"./ShipmentsRow.style\";\nimport Moment from \"moment\";\nimport MediaQuery from \"react-responsive\";\nimport TabContext from \"@mui/lab/TabContext\";\nimport ShipmentsRowActionTab from \"../ShipmentsRowActionTab/ShipmentsRowActionTab\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ShipmentsRow(props) {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const trackingContext = useTracking();\n  const {\n    row,\n    rowId\n  } = props;\n  const [contentLoaded, setContentLoaded] = useState(false);\n  const [flag, setFlag] = useState(false);\n  const [tabValue, setTabValue] = useState(\"1\");\n  Moment.locale(getI18n().resolvedLanguage);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  const handleRowExpand = async (event, expanded) => {\n    if (!contentLoaded) {\n      await trackingContext.getTrackingData(row.airWaybill);\n      setFlag(true);\n    } else {// do nothing... handler called!\n    }\n  };\n\n  useEffect(() => {\n    if (flag && !trackingContext.loading && trackingContext.trackingData.get(row.airWaybill)) {\n      setContentLoaded(true);\n    } // eslint-disable-next-line\n\n  }, [trackingContext.loading, flag]);\n  return /*#__PURE__*/_jsxDEV(RowAccordion, {\n    sx: {\n      mb: theme => theme.spacer_m\n    },\n    onChange: handleRowExpand,\n    TransitionProps: {\n      mountOnEnter: true\n    },\n    children: [/*#__PURE__*/_jsxDEV(AccordionSummary, {\n      expandIcon: /*#__PURE__*/_jsxDEV(ExpandMore, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }, this),\n      \"aria-controls\": rowId + \"-content\",\n      id: rowId + \"-header\",\n      children: /*#__PURE__*/_jsxDEV(RowSummaryWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(RowSummaryAirbill, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-label\",\n            children: t(\"shipments-dashboard.row.header.airWaybill\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-value\",\n            children: row.airWaybill\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RowSummaryReference, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-label\",\n            children: t(\"shipments-dashboard.row.header.packageReference\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-value\",\n            children: row.packageReference\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RowSummaryConsigneeName, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-label\",\n            children: t(\"shipments-dashboard.row.header.consigneeName\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-value\",\n            children: row.consigneeName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RowSummaryEstimatedDeliveryDate, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-label\",\n            children: t(\"shipments-dashboard.row.header.estimatedDeliveryDate\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-value\",\n            children: Moment(row.estimatedDeliveryDate).format(\"MMM D\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RowSummaryLastEventType, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-label\",\n            children: t(\"shipments-dashboard.row.header.lastEventType\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-value\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: row.lastEventType ? t(\"shipments-dashboard.row.status.\" + row.lastEventType) : \" \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"data-extra\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: row.shipperCity.charAt(0).toUpperCase() + row.shipperCity.slice(1).toLowerCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this), \" \", /*#__PURE__*/_jsxDEV(ArrowForward, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 17\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                children: row.consigneeCity.charAt(0).toUpperCase() + row.consigneeCity.slice(1).toLowerCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"data-progression\",\n              \"data-type\": row.lastEventType\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AccordionDetails, {\n      children: [/*#__PURE__*/_jsxDEV(Collapse, {\n        in: contentLoaded,\n        mountOnEnter: true,\n        children: [/*#__PURE__*/_jsxDEV(MediaQuery, {\n          maxWidth: 767,\n          children: /*#__PURE__*/_jsxDEV(TabContext, {\n            value: tabValue,\n            children: [/*#__PURE__*/_jsxDEV(ShipmentDetailsNavTabs, {\n              value: tabValue,\n              onChange: handleTabChange,\n              indicatorColor: \"primary\",\n              variant: \"fullWidth\",\n              selectionFollowsFocus: true,\n              \"aria-label\": \"Tabs with more information about this shipment. Use the arrow key to navigate between tabs.\",\n              children: [/*#__PURE__*/_jsxDEV(Tab, {\n                label: t(\"tracking-results.shipping-details.header.history\"),\n                value: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                label: t(\"tracking-results.shipping-details.header.info\"),\n                value: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                label: t(\"tracking-results.shipping-details.header.action\"),\n                value: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListTabPanel, {\n              value: \"1\",\n              children: /*#__PURE__*/_jsxDEV(ShipmentsRowHistoryTab, {\n                airwayBill: row.airWaybill\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListTabPanel, {\n              value: \"2\",\n              children: /*#__PURE__*/_jsxDEV(ShipmentsRowDetailsTab, {\n                airwayBill: row.airWaybill\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListTabPanel, {\n              value: \"3\",\n              children: /*#__PURE__*/_jsxDEV(ShipmentsRowActionTab, {\n                airwayBill: row.airWaybill\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MediaQuery, {\n          minWidth: 768,\n          children: /*#__PURE__*/_jsxDEV(DesktopTabWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(ShipmentsRowHistoryTab, {\n              airwayBill: row.airWaybill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ShipmentsRowDetailsTab, {\n              airwayBill: row.airWaybill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n        in: !contentLoaded,\n        mountOnEnter: true,\n        unmountOnExit: true,\n        children: /*#__PURE__*/_jsxDEV(ContentLoading, {\n          children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 60\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ShipmentsRow, \"qhrAopxphgmMiBjqLQ+iC1qSIXQ=\", false, function () {\n  return [useTranslation, useTracking];\n});\n\n_c = ShipmentsRow;\nexport default ShipmentsRow;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShipmentsRow\");","map":{"version":3,"sources":["/Users/mohamedmaqil/Desktop/RIVO/rivo-portal-ui/src/components/ShipmentsRow/ShipmentsRow.tsx"],"names":["useEffect","useState","useTranslation","getI18n","useTracking","CircularProgress","Tab","AccordionSummary","AccordionDetails","Collapse","ShipmentsRowHistoryTab","ShipmentsRowDetailsTab","ExpandMore","ArrowForward","RowSummaryWrapper","RowSummaryAirbill","RowSummaryReference","RowSummaryLastEventType","RowSummaryConsigneeName","RowSummaryEstimatedDeliveryDate","RowAccordion","ShipmentDetailsNavTabs","ContentLoading","ListTabPanel","DesktopTabWrapper","Moment","MediaQuery","TabContext","ShipmentsRowActionTab","ShipmentsRow","props","t","trackingContext","row","rowId","contentLoaded","setContentLoaded","flag","setFlag","tabValue","setTabValue","locale","resolvedLanguage","handleTabChange","event","newValue","handleRowExpand","expanded","getTrackingData","airWaybill","loading","trackingData","get","mb","theme","spacer_m","mountOnEnter","packageReference","consigneeName","estimatedDeliveryDate","format","lastEventType","shipperCity","charAt","toUpperCase","slice","toLowerCase","consigneeCity"],"mappings":"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","sourcesContent":["import { useEffect, useState, SyntheticEvent } from \"react\";\nimport { useTranslation, getI18n } from \"react-i18next\";\nimport { useTracking } from \"../../providers/TrackingProvider\";\nimport {\n  CircularProgress,\n  Tab,\n  AccordionSummary,\n  AccordionDetails,\n  Collapse\n} from \"@mui/material\";\nimport ShipmentsRowHistoryTab from \"../ShipmentsRowHistoryTab/ShipmentsRowHistoryTab\";\nimport ShipmentsRowDetailsTab from \"../ShipmentsRowDetailsTab/ShipmentsRowDetailsTab\";\nimport { ExpandMore, ArrowForward } from \"@mui/icons-material\";\nimport {\n  RowSummaryWrapper,\n  RowSummaryAirbill,\n  RowSummaryReference,\n  RowSummaryLastEventType,\n  RowSummaryConsigneeName,\n  RowSummaryEstimatedDeliveryDate,\n  RowAccordion,\n  ShipmentDetailsNavTabs,\n  ContentLoading,\n  ListTabPanel,\n  DesktopTabWrapper\n} from \"./ShipmentsRow.style\";\nimport Moment from \"moment\";\nimport MediaQuery from \"react-responsive\";\nimport TabContext from \"@mui/lab/TabContext\";\nimport ShipmentsRowActionTab from \"../ShipmentsRowActionTab/ShipmentsRowActionTab\";\n\nfunction ShipmentsRow(props) {\n  const { t } = useTranslation();\n  const trackingContext = useTracking();\n  const { row, rowId } = props;\n  const [contentLoaded, setContentLoaded] = useState(false);\n  const [flag, setFlag] = useState(false);\n  const [tabValue, setTabValue] = useState(\"1\");\n  Moment.locale(getI18n().resolvedLanguage);\n\n  const handleTabChange = (event: SyntheticEvent, newValue: string) => {\n    setTabValue(newValue);\n  };\n\n  const handleRowExpand = async (event: SyntheticEvent, expanded: boolean) => {\n    if (!contentLoaded) {\n      await trackingContext.getTrackingData(row.airWaybill);\n      setFlag(true);\n    } else {\n      // do nothing... handler called!\n    }\n  };\n\n  useEffect(() => {\n    if (\n      flag &&\n      !trackingContext.loading &&\n      trackingContext.trackingData.get(row.airWaybill)\n    ) {\n      setContentLoaded(true);\n    }\n    // eslint-disable-next-line\n  }, [trackingContext.loading, flag]);\n\n  return (\n    <RowAccordion\n      sx={{ mb: theme => theme.spacer_m }}\n      onChange={handleRowExpand}\n      TransitionProps={{ mountOnEnter: true }}\n    >\n      <AccordionSummary\n        expandIcon={<ExpandMore />}\n        aria-controls={rowId + \"-content\"}\n        id={rowId + \"-header\"}\n      >\n        <RowSummaryWrapper>\n          <RowSummaryAirbill>\n            <div className=\"data-label\">\n              {t(\"shipments-dashboard.row.header.airWaybill\")}\n            </div>\n            <div className=\"data-value\">{row.airWaybill}</div>\n          </RowSummaryAirbill>\n          <RowSummaryReference>\n            <div className=\"data-label\">\n              {t(\"shipments-dashboard.row.header.packageReference\")}\n            </div>\n            <div className=\"data-value\">{row.packageReference}</div>\n          </RowSummaryReference>\n          <RowSummaryConsigneeName>\n            <div className=\"data-label\">\n              {t(\"shipments-dashboard.row.header.consigneeName\")}\n            </div>\n            <div className=\"data-value\">{row.consigneeName}</div>\n          </RowSummaryConsigneeName>\n          <RowSummaryEstimatedDeliveryDate>\n            <div className=\"data-label\">\n              {t(\"shipments-dashboard.row.header.estimatedDeliveryDate\")}\n            </div>\n            <div className=\"data-value\">\n              {Moment(row.estimatedDeliveryDate).format(\"MMM D\")}\n            </div>\n          </RowSummaryEstimatedDeliveryDate>\n          <RowSummaryLastEventType>\n            <div className=\"data-label\">\n              {t(\"shipments-dashboard.row.header.lastEventType\")}\n            </div>\n            <div className=\"data-value\">\n              <div>\n                {row.lastEventType\n                  ? t(\"shipments-dashboard.row.status.\" + row.lastEventType)\n                  : \" \"}\n              </div>\n              <div className=\"data-extra\">\n                <span>\n                  {row.shipperCity.charAt(0).toUpperCase() +\n                    row.shipperCity.slice(1).toLowerCase()}\n                </span>{\" \"}\n                <ArrowForward />{\" \"}\n                <span>\n                  {row.consigneeCity.charAt(0).toUpperCase() +\n                    row.consigneeCity.slice(1).toLowerCase()}\n                </span>\n              </div>\n            </div>\n            <div className=\"data-bar\">\n              <div\n                className=\"data-progression\"\n                data-type={row.lastEventType}\n              ></div>\n            </div>\n          </RowSummaryLastEventType>\n        </RowSummaryWrapper>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Collapse in={contentLoaded} mountOnEnter>\n          <MediaQuery maxWidth={767}>\n            <TabContext value={tabValue}>\n              <ShipmentDetailsNavTabs\n                value={tabValue}\n                onChange={handleTabChange}\n                indicatorColor=\"primary\"\n                variant=\"fullWidth\"\n                selectionFollowsFocus\n                aria-label=\"Tabs with more information about this shipment. Use the arrow key to navigate between tabs.\"\n              >\n                <Tab\n                  label={t(\"tracking-results.shipping-details.header.history\")}\n                  value=\"1\"\n                />\n                <Tab\n                  label={t(\"tracking-results.shipping-details.header.info\")}\n                  value=\"2\"\n                />\n                <Tab\n                  label={t(\"tracking-results.shipping-details.header.action\")}\n                  value=\"3\"\n                />\n              </ShipmentDetailsNavTabs>\n              <ListTabPanel value=\"1\">\n                <ShipmentsRowHistoryTab airwayBill={row.airWaybill} />\n              </ListTabPanel>\n              <ListTabPanel value=\"2\">\n                <ShipmentsRowDetailsTab airwayBill={row.airWaybill} />\n              </ListTabPanel>\n              <ListTabPanel value=\"3\">\n                <ShipmentsRowActionTab airwayBill={row.airWaybill} />\n              </ListTabPanel>\n            </TabContext>\n          </MediaQuery>\n          <MediaQuery minWidth={768}>\n            <DesktopTabWrapper>\n              <ShipmentsRowHistoryTab airwayBill={row.airWaybill} />\n              <ShipmentsRowDetailsTab airwayBill={row.airWaybill} />\n            </DesktopTabWrapper>\n          </MediaQuery>\n        </Collapse>\n        <Collapse in={!contentLoaded} mountOnEnter unmountOnExit>\n          <ContentLoading>\n            <CircularProgress size={60} />\n          </ContentLoading>\n        </Collapse>\n      </AccordionDetails>\n    </RowAccordion>\n  );\n}\n\nexport default ShipmentsRow;\n"]},"metadata":{},"sourceType":"module"}