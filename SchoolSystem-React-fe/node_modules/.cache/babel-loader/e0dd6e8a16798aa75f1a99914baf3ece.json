{"ast":null,"code":"var _jsxFileName = \"/Users/mohamedmaqil/Desktop/RIVO/rivo-portal-ui/src/pages/ChangePassword/ChangePassword.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { Box, Grid, IconButton, InputAdornment, Typography } from \"@mui/material\";\nimport { makeValidate, makeRequired, showErrorOnBlur } from \"mui-rff\";\nimport { Form } from \"react-final-form\";\nimport { FORM_ERROR } from \"final-form\";\nimport PasswordChecklist from \"react-password-checklist\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\nimport i18n from \"i18next\";\nimport { Visibility, VisibilityOff } from \"@mui/icons-material\";\nimport { LoginBox, LoginButton, LoginErrorHelperText, LoginHeader, LoginTextField } from \"../../components/LoginComponents/LoginComponents.style\";\nimport { ChangePasswordSchema } from \"../../schema/ChangePasswordSchema\";\nimport { useAuth } from \"../../providers/Auth\";\nimport { TabTitle } from \"../../utils/GeneralFunctions\";\n/**\n * Uses the optional helper makeValidate function to format the error messages\n * into something usable by final form.\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst validate = makeValidate(ChangePasswordSchema, error => {\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"error\",\n    children: i18n.t(error.message)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 10\n  }, this);\n});\n/**\n * Grabs all the required fields from the schema so that they can be passed into\n * the components without having to declare them in both the schema and the component.\n */\n\nconst required = makeRequired(ChangePasswordSchema);\n\nconst ChangePassword = () => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const navigate = useNavigate();\n  TabTitle(t(\"changePassword.block1.header.page-title\"));\n  const {\n    user,\n    changePassword\n  } = useAuth();\n  const [submittedValues, setSubmittedValues] = useState(undefined);\n  const initialValues = {\n    oldPassword: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\"\n  };\n  const [showPassword, setShowPassword] = useState({\n    oldPassword: false,\n    newPassword: false,\n    confirmPassword: false\n  }); //const [showAlert, setShowAlert] = useState(false);\n\n  const onSubmit = async values => {\n    setSubmittedValues(values); //component coming from forgotPassword page\n\n    const data = await changePassword(user, values.oldPassword, values.newPassword);\n\n    if (data.status === \"FAIL\" || data.error) {\n      return {\n        [FORM_ERROR]: \"changePassword.block-form.changeError\"\n      };\n    } else {\n      navigate(\"/view-profile\", {\n        state: {\n          showAlert: true,\n          severity: \"success\",\n          message: \"resetPassword.header.page-success-alert\"\n        }\n      });\n    }\n  };\n\n  const handleMouseDownPassword = event => {\n    event.preventDefault();\n  };\n\n  return /*#__PURE__*/_jsxDEV(LoginBox, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      sx: {\n        pt: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        children: /*#__PURE__*/_jsxDEV(LoginHeader, {\n          component: \"h1\",\n          variant: \"display2\",\n          color: \"fuchsiaAccessible.main\",\n          children: t(\"changePassword.block1.header.page-title\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: onSubmit,\n          initialValues: submittedValues ? submittedValues : initialValues,\n          validate: validate,\n          render: _ref => {\n            let {\n              submitError,\n              handleSubmit,\n              submitting,\n              values\n            } = _ref;\n            return /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              autoComplete: \"new-password\",\n              children: [/*#__PURE__*/_jsxDEV(LoginTextField, {\n                required: required.oldPassword,\n                type: showPassword && showPassword.oldPassword ? \"text\" : \"password\",\n                label: t(\"changePassword.block-form.input.code\"),\n                id: \"oldPassword\",\n                name: \"oldPassword\",\n                variant: \"filled\",\n                autoComplete: \"current-password\",\n                showError: showErrorOnBlur,\n                InputProps: {\n                  disableUnderline: true,\n                  endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                    position: \"end\",\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      \"aria-label\": showPassword && showPassword.oldPassword ? t(\"all.button.password-icon-show\") : t(\"all.button.password-icon-hide\"),\n                      onClick: () => setShowPassword(prevState => ({ ...prevState,\n                        oldPassword: !prevState.oldPassword\n                      })),\n                      onMouseDown: handleMouseDownPassword,\n                      edge: \"end\",\n                      component: \"button\",\n                      disableRipple: true,\n                      children: showPassword && showPassword.oldPassword ? /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 147,\n                        columnNumber: 29\n                      }, this) : /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 149,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 23\n                  }, this)\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(LoginTextField, {\n                required: required.newPassword,\n                type: showPassword && showPassword.newPassword ? \"text\" : \"password\",\n                label: t(\"resetPassword.block-form.input.newPassword\"),\n                id: \"newPassword\",\n                name: \"newPassword\",\n                variant: \"filled\",\n                showError: () => {\n                  return;\n                },\n                InputProps: {\n                  disableUnderline: true,\n                  endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                    position: \"end\",\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      \"aria-label\": showPassword && showPassword.newPassword ? t(\"all.button.password-icon-show\") : t(\"all.button.password-icon-hide\"),\n                      onClick: () => setShowPassword(prevState => ({ ...prevState,\n                        newPassword: !prevState.newPassword\n                      })),\n                      onMouseDown: handleMouseDownPassword,\n                      edge: \"end\",\n                      component: \"button\",\n                      disableRipple: true,\n                      children: showPassword && showPassword.newPassword ? /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 192,\n                        columnNumber: 29\n                      }, this) : /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 194,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 23\n                  }, this)\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                component: \"p\",\n                variant: \"h4\",\n                sx: {\n                  mb: theme => theme.spacer_n\n                },\n                children: [t(\"resetPassword.block-form.text.newPassword\"), \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  mb: theme => theme.spacer_n\n                },\n                children: /*#__PURE__*/_jsxDEV(PasswordChecklist, {\n                  rules: [\"minLength\", \"specialChar\", \"number\", \"capital\", \"lowercase\"],\n                  minLength: 12,\n                  value: values && values.newPassword ? values.newPassword : \"\",\n                  valueAgain: values && values.confirmPassword ? values.confirmPassword : \"\",\n                  invalidColor: \"#E10993\",\n                  validColor: \"#E10993\",\n                  messages: {\n                    minLength: t(\"resetPassword.block-form.error.password-characters-minimum\"),\n                    specialChar: t(\"resetPassword.block-form.error.password-special-character-minimum\"),\n                    number: t(\"resetPassword.block-form.error.password-number-minimum\"),\n                    capital: t(\"resetPassword.block-form.error.password-uppercase-minimum\"),\n                    lowercase: t(\"resetPassword.block-form.error.password-lowercase-minimum\")\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(LoginTextField, {\n                required: required.confirmPassword,\n                type: showPassword && showPassword.confirmPassword ? \"text\" : \"password\",\n                label: t(\"resetPassword.block-form.input.confirmPassword\"),\n                id: \"confirmPassword\",\n                name: \"confirmPassword\",\n                variant: \"filled\",\n                showError: showErrorOnBlur,\n                InputProps: {\n                  disableUnderline: true,\n                  endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                    position: \"end\",\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      \"aria-label\": showPassword && showPassword.confirmPassword ? t(\"all.button.password-icon-show\") : t(\"all.button.password-icon-hide\"),\n                      onClick: () => setShowPassword(prevState => ({ ...prevState,\n                        confirmPassword: !prevState.confirmPassword\n                      })),\n                      onMouseDown: handleMouseDownPassword,\n                      edge: \"end\",\n                      component: \"button\",\n                      disableRipple: true,\n                      children: showPassword && showPassword.confirmPassword ? /*#__PURE__*/_jsxDEV(VisibilityOff, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 281,\n                        columnNumber: 29\n                      }, this) : /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 283,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 263,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 23\n                  }, this)\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this), submitError && /*#__PURE__*/_jsxDEV(LoginErrorHelperText, {\n                variant: \"filled\",\n                filled: true,\n                required: true,\n                component: \"p\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"error\",\n                  children: t(submitError)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(LoginButton, {\n                variant: \"contained\",\n                type: \"submit\",\n                disabled: submitting,\n                size: \"large\",\n                sx: {\n                  mr: theme => theme.spacer_m\n                },\n                disableElevation: true,\n                children: t(\"changePassword.block-form.button.submit\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(LoginButton, {\n                variant: \"contained\",\n                disabled: submitting,\n                size: \"large\",\n                sx: {\n                  float: \"right\"\n                },\n                disableElevation: true,\n                onClick: () => navigate(-1),\n                children: t(\"changePassword.block-form.button.cancel\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ChangePassword, \"nfsjmAmV184dGtl9iVdhwtucK6M=\", false, function () {\n  return [useTranslation, useNavigate, useAuth];\n});\n\n_c = ChangePassword;\nexport default ChangePassword;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChangePassword\");","map":{"version":3,"sources":["/Users/mohamedmaqil/Desktop/RIVO/rivo-portal-ui/src/pages/ChangePassword/ChangePassword.tsx"],"names":["React","useState","Box","Grid","IconButton","InputAdornment","Typography","makeValidate","makeRequired","showErrorOnBlur","Form","FORM_ERROR","PasswordChecklist","useTranslation","useNavigate","i18n","Visibility","VisibilityOff","LoginBox","LoginButton","LoginErrorHelperText","LoginHeader","LoginTextField","ChangePasswordSchema","useAuth","TabTitle","validate","error","t","message","required","ChangePassword","navigate","user","changePassword","submittedValues","setSubmittedValues","undefined","initialValues","oldPassword","newPassword","confirmPassword","showPassword","setShowPassword","onSubmit","values","data","status","state","showAlert","severity","handleMouseDownPassword","event","preventDefault","pt","submitError","handleSubmit","submitting","disableUnderline","endAdornment","prevState","mb","theme","spacer_n","minLength","specialChar","number","capital","lowercase","mr","spacer_m","float"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  Box,\n  Grid,\n  IconButton,\n  InputAdornment,\n  Typography\n} from \"@mui/material\";\nimport { makeValidate, makeRequired, showErrorOnBlur } from \"mui-rff\";\nimport { Form } from \"react-final-form\";\nimport { FORM_ERROR } from \"final-form\";\nimport PasswordChecklist from \"react-password-checklist\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\nimport i18n from \"i18next\";\nimport { Visibility, VisibilityOff } from \"@mui/icons-material\";\nimport {\n  LoginBox,\n  LoginButton,\n  LoginErrorHelperText,\n  LoginHeader,\n  LoginTextField\n} from \"../../components/LoginComponents/LoginComponents.style\";\nimport { ChangePasswordSchema } from \"../../schema/ChangePasswordSchema\";\nimport { ChangePasswordInterface } from \"../../interfaces/ChangePaswordInterface\";\nimport { useAuth } from \"../../providers/Auth\";\nimport { TabTitle } from \"../../utils/GeneralFunctions\";\n/**\n * Uses the optional helper makeValidate function to format the error messages\n * into something usable by final form.\n */\nconst validate = makeValidate(ChangePasswordSchema, error => {\n  return <span className=\"error\">{i18n.t(error.message)}</span>;\n});\n/**\n * Grabs all the required fields from the schema so that they can be passed into\n * the components without having to declare them in both the schema and the component.\n */\nconst required = makeRequired(ChangePasswordSchema);\n\nconst ChangePassword = () => {\n\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  TabTitle(t(\"changePassword.block1.header.page-title\"));\n  const { user, changePassword } = useAuth();\n\n  const [submittedValues, setSubmittedValues] = useState<\n    ChangePasswordInterface | undefined\n  >(undefined);\n\n  const initialValues: ChangePasswordInterface = {\n    oldPassword: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\"\n  };\n\n  const [showPassword, setShowPassword] = useState({\n    oldPassword: false,\n    newPassword: false,\n    confirmPassword: false\n  });\n\n  //const [showAlert, setShowAlert] = useState(false);\n\n  const onSubmit = async (values: ChangePasswordInterface) => {\n    setSubmittedValues(values);\n\n    //component coming from forgotPassword page\n    const data: any = await changePassword(\n      user,\n      values.oldPassword,\n      values.newPassword\n    );\n\n    if (data.status === \"FAIL\" || data.error) {\n      return { [FORM_ERROR]: \"changePassword.block-form.changeError\" };\n    } else {\n      navigate(\"/view-profile\", {\n        state: {\n          showAlert: true,\n          severity: \"success\",\n          message: \"resetPassword.header.page-success-alert\"\n        }\n      });\n    }\n  };\n\n  const handleMouseDownPassword = event => {\n    event.preventDefault();\n  };\n\n  return (\n    <LoginBox>\n      <Grid container sx={{ pt: 0 }}>\n        <Grid item xs={12} sm={6}>\n          <LoginHeader\n            component=\"h1\"\n            variant=\"display2\"\n            color=\"fuchsiaAccessible.main\"\n          >\n            {t(\"changePassword.block1.header.page-title\")}\n          </LoginHeader>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Form\n            onSubmit={onSubmit}\n            initialValues={submittedValues ? submittedValues : initialValues}\n            validate={validate}\n            render={({ submitError, handleSubmit, submitting, values }) => (\n              <form onSubmit={handleSubmit} autoComplete=\"new-password\">\n                <LoginTextField\n                  required={required.oldPassword}\n                  type={\n                    showPassword && showPassword.oldPassword\n                      ? \"text\"\n                      : \"password\"\n                  }\n                  label={t(\"changePassword.block-form.input.code\")}\n                  id=\"oldPassword\"\n                  name=\"oldPassword\"\n                  variant=\"filled\"\n                  autoComplete=\"current-password\"\n                  showError={showErrorOnBlur}\n                  InputProps={{\n                    disableUnderline: true,\n                    endAdornment: (\n                      <InputAdornment position=\"end\">\n                        <IconButton\n                          aria-label={\n                            showPassword && showPassword.oldPassword\n                              ? t(\"all.button.password-icon-show\")\n                              : t(\"all.button.password-icon-hide\")\n                          }\n                          onClick={() =>\n                            setShowPassword(prevState => ({\n                              ...prevState,\n                              oldPassword: !prevState.oldPassword\n                            }))\n                          }\n                          onMouseDown={handleMouseDownPassword}\n                          edge=\"end\"\n                          component=\"button\"\n                          disableRipple\n                        >\n                          {showPassword && showPassword.oldPassword ? (\n                            <VisibilityOff />\n                          ) : (\n                            <Visibility />\n                          )}\n                        </IconButton>\n                      </InputAdornment>\n                    )\n                  }}\n                />\n                <LoginTextField\n                  required={required.newPassword}\n                  type={\n                    showPassword && showPassword.newPassword\n                      ? \"text\"\n                      : \"password\"\n                  }\n                  label={t(\"resetPassword.block-form.input.newPassword\")}\n                  id=\"newPassword\"\n                  name=\"newPassword\"\n                  variant=\"filled\"\n                  showError={() => {\n                    return;\n                  }}\n                  InputProps={{\n                    disableUnderline: true,\n                    endAdornment: (\n                      <InputAdornment position=\"end\">\n                        <IconButton\n                          aria-label={\n                            showPassword && showPassword.newPassword\n                              ? t(\"all.button.password-icon-show\")\n                              : t(\"all.button.password-icon-hide\")\n                          }\n                          onClick={() =>\n                            setShowPassword(prevState => ({\n                              ...prevState,\n                              newPassword: !prevState.newPassword\n                            }))\n                          }\n                          onMouseDown={handleMouseDownPassword}\n                          edge=\"end\"\n                          component=\"button\"\n                          disableRipple\n                        >\n                          {showPassword && showPassword.newPassword ? (\n                            <VisibilityOff />\n                          ) : (\n                            <Visibility />\n                          )}\n                        </IconButton>\n                      </InputAdornment>\n                    )\n                  }}\n                />\n                <Typography\n                  component=\"p\"\n                  variant=\"h4\"\n                  sx={{ mb: theme => theme.spacer_n }}\n                >\n                  {t(\"resetPassword.block-form.text.newPassword\")}:\n                </Typography>\n                <Box sx={{ mb: theme => theme.spacer_n }}>\n                  <PasswordChecklist\n                    rules={[\n                      \"minLength\",\n                      \"specialChar\",\n                      \"number\",\n                      \"capital\",\n                      \"lowercase\"\n                    ]}\n                    minLength={12}\n                    value={\n                      values && values.newPassword ? values.newPassword : \"\"\n                    }\n                    valueAgain={\n                      values && values.confirmPassword\n                        ? values.confirmPassword\n                        : \"\"\n                    }\n                    invalidColor=\"#E10993\"\n                    validColor=\"#E10993\"\n                    messages={{\n                      minLength: t(\n                        \"resetPassword.block-form.error.password-characters-minimum\"\n                      ),\n                      specialChar: t(\n                        \"resetPassword.block-form.error.password-special-character-minimum\"\n                      ),\n                      number: t(\n                        \"resetPassword.block-form.error.password-number-minimum\"\n                      ),\n                      capital: t(\n                        \"resetPassword.block-form.error.password-uppercase-minimum\"\n                      ),\n                      lowercase: t(\n                        \"resetPassword.block-form.error.password-lowercase-minimum\"\n                      )\n                    }}\n                  />\n                </Box>\n                <LoginTextField\n                  required={required.confirmPassword}\n                  type={\n                    showPassword && showPassword.confirmPassword\n                      ? \"text\"\n                      : \"password\"\n                  }\n                  label={t(\"resetPassword.block-form.input.confirmPassword\")}\n                  id=\"confirmPassword\"\n                  name=\"confirmPassword\"\n                  variant=\"filled\"\n                  showError={showErrorOnBlur}\n                  InputProps={{\n                    disableUnderline: true,\n                    endAdornment: (\n                      <InputAdornment position=\"end\">\n                        <IconButton\n                          aria-label={\n                            showPassword && showPassword.confirmPassword\n                              ? t(\"all.button.password-icon-show\")\n                              : t(\"all.button.password-icon-hide\")\n                          }\n                          onClick={() =>\n                            setShowPassword(prevState => ({\n                              ...prevState,\n                              confirmPassword: !prevState.confirmPassword\n                            }))\n                          }\n                          onMouseDown={handleMouseDownPassword}\n                          edge=\"end\"\n                          component=\"button\"\n                          disableRipple\n                        >\n                          {showPassword && showPassword.confirmPassword ? (\n                            <VisibilityOff />\n                          ) : (\n                            <Visibility />\n                          )}\n                        </IconButton>\n                      </InputAdornment>\n                    )\n                  }}\n                />\n                {submitError && (\n                  <LoginErrorHelperText\n                    variant=\"filled\"\n                    filled\n                    required\n                    component=\"p\"\n                  >\n                    <span className=\"error\">{t(submitError)}</span>\n                  </LoginErrorHelperText>\n                )}\n                <LoginButton\n                  variant=\"contained\"\n                  type=\"submit\"\n                  disabled={submitting}\n                  size=\"large\"\n                  sx={{ mr: theme => theme.spacer_m }}\n                  disableElevation\n                >\n                  {t(\"changePassword.block-form.button.submit\")}\n                </LoginButton>\n                <LoginButton\n                  variant=\"contained\"\n                  disabled={submitting}\n                  size=\"large\"\n                  sx={{ float: \"right\" }}\n                  disableElevation\n                  onClick={() => navigate(-1)}\n                >\n                  {t(\"changePassword.block-form.button.cancel\")}\n                </LoginButton>\n              </form>\n            )}\n          />\n        </Grid>\n      </Grid>\n    </LoginBox>\n  );\n};\n\nexport default ChangePassword;\n"]},"metadata":{},"sourceType":"module"}